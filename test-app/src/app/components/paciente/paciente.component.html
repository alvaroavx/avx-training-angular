<!-- paciente-listado.component.html -->
<!--
<h2>Listado de Pacientes con DataTables</h2>
<div class="table-responsive">
  <table id="pacientesTable" class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Edad</th>
        <th>Diagnóstico</th>
        <th>Hab.</th>
        <th>Próx. Cita</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of pacientes" [ngClass]="{ 'bg-danger': p.estado === EstadoPaciente.Critico }">
        <td>{{ p.id }}</td>
        <td>{{ p.nombre }}</td>
        <td>{{ p.apellido }}</td>
        <td>{{ p.getEdad() }}</td>
        <td>{{ p.diagnostico || '—' }}</td>
        <td>{{ p.habitacion }}</td>
        <td>{{ p.proximaCita | date:'shortDate' }}</td>
      </tr>
    </tbody>
  </table>
</div>
-->

<h3>Pacientes Graves & Críticos</h3>
<div class="table-responsive">
  <table class="table table-striped">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Edad</th>
        <th>Diagnóstico</th>
        <th>Hab.</th>
        <th>Próx. Cita</th>
        <th>Estado</th>
        <th>Visitado</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let p of pacientes">
        <tr *ngIf="p.estado === EstadoPaciente.Critico || p.estado === EstadoPaciente.Grave"
            [ngClass]="{'table-success': isVisitado(p)}"
            [ngStyle]="{'opacity': isVisitado(p) ? '0.6' : '1'}"
            [appHighlightCriticalOnline]="p.estado === EstadoPaciente.Critico">
          <td>{{ p.id }}</td>
          <td>{{ p.nombre }}</td>
          <td>{{ p.apellido }}</td>
          <td>{{ p.getEdad() }}</td>
          <td>{{ p.diagnostico || '—' }}</td>
          <td>{{ p.habitacion }}</td>
          <td>{{ p.proximaCita | date:'shortDate' }}</td>
          <td>{{ p.estado }}</td>
          <td><button 
                class="btn btn-sm"
                [ngClass]="{
                  'btn-outline-secondary': !isVisitado(p),
                  'btn-success': isVisitado(p)
                }"
                (click)="toggleVisitado(p)">{{ isVisitado(p) ? '✔ Visitado' : 'Marcar Visitado' }}</button></td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>